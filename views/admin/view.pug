extends ../wrapper

block content
	.admin-form-container
		.admin-form.clear-fix.mdc-elevation--z1
			.admin(data-jsclass="adminController" data-mountpoint= mountpoint data-model= admin.name data-id= row.id data-redirect= mountpoint + '/' + admin.name)
				.page-header
					h2
						a(href= mountpoint + '/' + admin.name)
							i.material-icons arrow_back_ios
						= admin.name + ' table'
						.pull-right
							button.mdc-button.add-button
								i.material-icons add_circle
				.page-content
					table
						tr
							td
								= 'Row: '
								em= row.id
							td
								.button-bar.pull-right
									button.mdc-button.edit-button
										i.material-icons edit
									button.mdc-button.delete-button
										i.material-icons delete_forever
								
						for assoc in admin.associations
							if assoc.relationship === 'BelongsTo'
								tr
									td= assoc.as
									td
										a(href= mountpoint + '/' + assoc.target + '/' + row[assoc.as].id)
											//=JSON.stringify(adminTables[assoc.target].options)
											= row[assoc.as][adminTables[assoc.target].options.defaultColumn]
											
						for property in admin.options.viewColumns
							tr
								td= property
								td= row[property]
								
					for assoc in admin.associations
						if assoc.relationship === 'HasMany' || assoc.relationship === 'BelongsToMany'
							p= JSON.stringify(assoc)
							p
								button.mdc-button.add-button(data-target= assoc.target data-fk= assoc.foreignKey data-belongs-to= row.id)
									i.material-icons add_circle
								
								= assoc.as
								table
									for rel in row[assoc.as]
										tr
											for property in adminTables[assoc.target].options.listColumns
												td
													a(href= mountpoint + '/' + assoc.target + '/' + rel.id)= rel[property]
						
