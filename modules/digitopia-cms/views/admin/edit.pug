extends ../../../../views/wrapper

block content
	- let back = mountpoint + '/' + admin.name;
	if (admin.options.behavior === 'child') && fk
		- back = mountpoint + '/' + pt + '/' + row[fk]
		
	.admin-container
		.admin.clear-fix.mdc-elevation--z1
			div(data-reagent-class="adminController" data-mountpoint= mountpoint data-model= admin.name data-id= row.id data-redirect= back)
			
				.page-header
					h2
						
						a.back-button(href= mountpoint + '/' + admin.name + '/' + row.id)
							i.material-icons arrow_back_ios
						= admin.name + ': edit row ' + row.id
						
						if canDelete
							.pull-right.action
								.delete-button
									i.material-icons delete_forever
										
				.page-content
					.admin-form
						form.form-validation(data-reagent-class="formValidator" data-submitter="#submitter")
							input(type="hidden" name="_csrf" value= csrfToken)

							.flextable(data-reagent-class="flexTable" data-break="screen-xsmall,screen-small")
								ul
									li
									li
								ul
									for property in admin.options.editColumns
										if property !== fk
											li.label.edit
												= admin.getColumn(property).options.label
												ul
													li.data!= admin.getColumn(property).getForm(row, prepared[property])

									if (admin.options.behavior !== 'reference')
										// belongs to many relationships (through tables)
										for join in admin.options.joins
											li.label
												= join.as
												ul
													li.data!= admin.getColumn(join.as).getForm(row,prepared[join.as],{resolved:joins[join.as]})
														
							section.form-group.pull-right.button-bar
								a.mdc-button(href= back) Cancel
								button#submitter.mdc-button.mdc-button--raised(disabled).primary-button
									span.mdc-button__label Save
							
						.ajax-errors
	//	
		p prepared
		pre= JSON.stringify(prepared,"",2)
		
		p joins
		pre= JSON.stringify(joins,"",2)
		
		p Options
		pre= JSON.stringify(admin.options,"",2)
